<h1>Как работает DHCP?</h1>

<p>Данный протокол работает в соответствии с моделью «клиент-сервер», то есть существует главный компьютер (называется он DHCP-сервер) и остальные компьютеры (называются они клиенты) которые подчиняются DHCP-серверу.</p>
<p>1) Клиент посылает широковещательный запрос по всей физической сети с целью обнаружить доступные DHCP-серверы. Он отправляет сообщение DHCPDISCOVER, при этом в качестве IP-адреса источника указывается 0.0.0.0 (так как компьютер ещё не имеет собственного IP-адреса), а в качестве адреса назначения - широковещательный адрес 255.255.255.255</p>
<p>2) Любой из DHCP-серверов может ответить на поступившее сообщение сообщением DHCPOFFER, включив в него доступный IP-адрес и параметры конфигурации клиента. На этой стадии сервер не резервирует указанный адрес.</p>
<p>3) Клиент не обязан реагировать на первое же поступившее предложение. Допускается, чтобы он дождался откликов от нескольких DHCP-серверов и, остановившись на одном из предложений, отправил в сеть широковещательное сообщение DHCPREQUEST. В нем содержатся идентификатор выбранного сервера и желательные значения запрашиваемых параметров конфигурации, например предыдущий IP-адрес клиента.</p>
<p>Не исключено, что клиента не устроит ни одно из серверных предложений. Тогда вместо DHCPREQUEST он снова выдаст в сеть запрос DHCPDISCOVER. Именно по этой причине сервер не обязан резервировать помещенный в DHCPOFFER адрес.</p>
<p>4) Присутствующий в сообщении DHCPREQUEST идентификатор позволяет соответствующему DHCP-серверу убедиться в том, что клиент принял именно его предложение. В ответ сервер отправляет подтверждение DHCPACK, содержащее значения требуемых параметров конфигурации, и производит соответствующую запись в базу данных.</p>
<p>Если к моменту поступления сообщения DHCPREQUEST предложенный адрес уже ушел к другому клиенту (например, первый клиент слишком долго размышлял над поступившими предложениями), сервер отвечает сообщением DHCPNACK и весь процесс для клиента повторяется снова.</p>
